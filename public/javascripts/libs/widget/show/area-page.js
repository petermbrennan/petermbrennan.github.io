"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function initializeAreaPage(){G5.loadWidgetConfigs(".area-page .config",AreaPageWidget)}var _createClass=function(){function e(e,n){for(var a=0;a<n.length;a++){var o=n[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,a,o){return a&&e(n.prototype,a),o&&e(n,o),n}}(),AreaPageWidget=function(){function e(n){_classCallCheck(this,e),this.configs=n,this.numLocations=n.addresses.length,this.widget=$(".area-page"),this.setupGoogleMaps(),this.setupPhones(),this.setupMapMarkers()}return _createClass(e,[{key:"setupGoogleMaps",value:function(){window.googleMaps={latlngbounds:new google.maps.LatLngBounds,map:new google.maps.Map(this.widget.find(".canvas")[0],this.mapOptions())}}},{key:"mapOptions",value:function(){return{scrollwheel:this.configs.panZoom,draggable:this.configs.panZoom,disableDefaultUI:!this.configs.panZoom,disableDoubleClickZoom:!this.configs.panZoom,zoom:16,mapTypeId:google.maps.MapTypeId[this.configs.mapType]}}},{key:"setupMapMarkers",value:function(){for(var e=0,n=this.configs.addresses.length;e<n;e++){var a=this.configs.addresses[e];this.getMapMarker(a[0],a[1])}}},{key:"getMapMarker",value:function(e,n){var a=this;$.getJSON(G5.googleMapsApi.geocodeUrl(),{address:e,sensor:"false"}).done(function(o){a.setMapMarker(o,e,n)})}},{key:"setMapMarker",value:function(e,n,a){var o=e.results[0].geometry.location,t=new google.maps.LatLng(o.lat,o.lng),s=window.googleMaps,i=new google.maps.Marker({position:t,map:s.map,title:n}),r=new google.maps.InfoWindow({content:a});google.maps.event.addListener(i,"click",function(){r.open(s.map,i)}),1===this.numLocations?(s.map.setZoom(18),s.map.setCenter(t)):(s.latlngbounds.extend(t),s.map.fitBounds(s.latlngbounds))}},{key:"setupPhones",value:function(){return new PhoneNumber(this.getPhoneConfigs())}},{key:"getPhoneConfigs",value:function(){return{cpnsUrl:this.configs.cpnsUrl,clientUrn:this.configs.clientUrn,locationUrns:this.getLocationUrns()}}},{key:"getLocationUrns",value:function(){return this.widget.find(".area-page-location").map(function(e,n){var a=$(n).data("locationUrn");return{urn:a,scope:"div#area-page-location-"+a}})}}]),e}();$(document).ready(function(){var e=$(".area-page .config").length;e&&$.getScript(G5.googleMapsApi.apiScript("initializeAreaPage"))});