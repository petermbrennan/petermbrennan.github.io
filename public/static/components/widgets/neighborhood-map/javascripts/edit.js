"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),EditNeighborhoodMapWidget=function(){function t(){_classCallCheck(this,t),this.topModal=window.top.$(".modal"),this.stylesBlock=this.topModal.find("#map-styles"),this.mapUrl="/static/components/widgets/neighborhood-map/map.json",this.mapIdField=this.topModal.find(".map-id").first(),this.mapValuesField=this.topModal.find(".map-values").first(),this.loadJSON()}return _createClass(t,[{key:"loadJSON",value:function(){var t=this;$.getJSON(this.mapUrl).done(function(e){t.styles=e.styles,e.styles.length&&(t.buildMarkup(),t.setContent())}).fail(function(){console.error("Failed to load JSON")})}},{key:"buildMarkup",value:function(){var t="",e=parseInt(this.topModal.find(".map-id").val());this.styles.forEach(function(a){var i=e===a.id,s=i?" selected":"",n=i?" checked='checked'":"";t+="<div class='map-wrap"+s+"'>\n                            <h3>"+a.name+"</h3>\n                            <img src='"+a.imageUrl+"'>\n                            <input type='radio' name='map-type' value='"+a.id+"'"+n+">\n                          </div>"}),this.stylesBlock.append(t)}},{key:"setContent",value:function(){var t=this,e=this.stylesBlock.find(".map-wrap"),a=parseInt($(".map-wrap.selected").find("input:radio").val());e.on("click",function(i){var s=$(i.currentTarget),n=s.find("input:radio");a=parseInt(n.val()),e.removeClass("selected"),s.addClass("selected"),n.attr("checked",!0),t.setStyles(a)}),this.setStyles(a)}},{key:"setStyles",value:function(t){var e=this;this.styles.forEach(function(a){a.id===t&&(e.currentStyle=a.json.replace(/'/g,'"'),e.currentId=a.id)}),this.mapIdField.val(this.currentId),this.mapValuesField.val(JSON.stringify(this.currentStyle))}}]),t}();new EditNeighborhoodMapWidget;