"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function e(t,n,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,n);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in s)return s.value;var a=s.get;if(void 0!==a)return a.call(i)},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),SocialFeedWidget=function(){function e(t){_classCallCheck(this,e),this.configs=t,this.widget=$("#"+this.configs.widgetId),this.setupStringPolyfill(),this.setupSocialFeeds()}return _createClass(e,[{key:"setupStringPolyfill",value:function(){String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1})}},{key:"feedsList",value:function(){var e=[];return e[this.configs.facebook_position-1]=FacebookFeed,e[this.configs.twitter_position-1]=TwitterFeed,e[this.configs.blog_position-1]=BlogFeed,e[this.configs.google_position-1]=GoogleFeed,e[this.configs.instagram_position-1]=InstagramFeed,e}},{key:"setupSocialFeeds",value:function(){var e=this;this.feeds=[],this.feedsList().forEach(function(t){var n=new t(e.configs,e.widget);n.fetch(),e.feeds.push(n)})}}]),e}(),Feed=function(){function e(t,n,i){_classCallCheck(this,e),this.configs=t,this.widget=n,this.type=i,this.tab=null}return _createClass(e,[{key:"fetch",value:function(){this.showFeed()&&(this.loadFeed(),this.updateFeed())}},{key:"loadFeed",value:function(){var e=this;return $.ajax({url:this.url(),dataType:"json",success:function(t){e.success(t)},error:function(t){e.error(t.responseText)}})}},{key:"updateFeed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.buildTab(),this.buildContent(e),this.buildListener()}},{key:"showFeed",value:function(){return this.showFeedToggle()&&this.validFeedId()}},{key:"success",value:function(e){e.length>0&&this.updateFeed(e)}},{key:"error",value:function(e){e.length&&this.updateFeed(e)}},{key:"validFeedId",value:function(){return this.feedId().length>1}},{key:"showFeedToggle",value:function(){return this.configs[this.type+"_toggle"]===!0}},{key:"buildTab",value:function(){if(!this.tab){var e="#"+this.type+"-feed",t=this.type.charAt(0).toUpperCase()+this.type.slice(1),n='data-position="'+this.configs[this.type+"_position"]+'"',i=$("<a class='feed-switch feed-switch-"+this.type+"' href='"+e+"' title='Show "+t+" Feed' "+n+">"+this.icon()+"</a>");this.appendTab(i)}}},{key:"appendTab",value:function(e){var t=e.data("position"),n=this.widget.find(".feed-switcher"),i=null;n.find(".feed-switch").each(function(e,n){var s=$(n);s.data("position")<t&&(i=s)}),i?i.after(e):n.prepend(e),this.tab=e}},{key:"buildContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.loadingIcon(),n="";e&&(t="String"==typeof e?e:this.feedList(e),n=this.feedLink()),this.block?(this.block.find(".feed").html(t),this.block.find(".feed-link").html(n)):(this.block=$("<div class='"+this.type+"-social-feed feed-section' style='display: none;'>\n                       <ul class='h-feed feed'>"+t+"</ul>\n                       <span class='feed-link'>"+n+"</span>\n                     </div>"),this.widget.append(this.block))}},{key:"buildItem",value:function(){return""}},{key:"buildListener",value:function(){var e=this;this.listener||(this.listener=this.tab.on("click",function(t){return e.widget.find(".feed-switch").removeClass("active"),$(t.currentTarget).addClass("active"),e.widget.find(".feed-section").css("display","none"),e.block.css("display","block"),!1}),1===this.widget.find(".feed-switcher a").length&&(this.tab.addClass("active"),this.block.css("display","block")))}},{key:"loadingIcon",value:function(){return'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'}},{key:"feedLink",value:function(){return""}},{key:"feedList",value:function(e){return""}},{key:"url",value:function(){return""}},{key:"feedId",value:function(){return""}},{key:"icon",value:function(){return""}}]),e}(),BlogFeed=function(e){function t(e,n){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,"blog"));return i.atom=i.configs.feed_url.includes("atom"),i}return _inherits(t,e),_createClass(t,[{key:"url",value:function(){var e=encodeURIComponent("select * from xml where url = '"+this.configs.feed_url+"'");return"//query.yahooapis.com/v1/public/yql?format=json&q="+e}},{key:"success",value:function(e){if(e){var n=this.configs.feed_url.includes("atom");n?this.blogRootUrl=e.query.results.feed.link[0].href:this.blogRootUrl=e.query.results.rss.channel.link,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"success",this).call(this,this.contentFinder(e))}}},{key:"icon",value:function(){return"<svg version='1.1' id='Layer_2' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='30px' height='30px' viewBox='0 0 200 200' enable-background='new 0 0 200 200' xml:space='preserve'>\n       <path stroke-width='40' d='M0,22'/>\n       <path stroke-width='40' d='M111,196.48C111,136.52,61.354,88,0,88'/>\n       <path stroke-width='40' d='M181,196.48'/>\n       <circle cx='27.5' cy='169.5' r='24.5'/>\n       <path stroke-width='40' d='M181,196.48C181,100.039,100.045,22,0,22'/>\n     </svg>"}},{key:"contentFinder",value:function(e){var t=e.query.results;if(!t)return"";try{return this.atom?t.feed.entry:t.rss.channel.item}catch(n){return""}}},{key:"isURL",value:function(e){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(e)}},{key:"feedList",value:function(e){var t=this,n=[],i=e.slice(0,this.configs.entries_to_show);return i.forEach(function(e){n.push(t.feedItem(e))}),n.join("")}},{key:"feedLink",value:function(){return this.isURL(this.blogRootUrl)?"<a class='btn' href='"+this.blogRootUrl+"' target='_blank'>Read All</a>":""}},{key:"feedItem",value:function(e){var t=this.atom?e.content.base:e.link,n=this.atom?e.title.content:e.title,i=this.atom?e.summary.content:e.description,s=this.atom?e.author.name:e.author||e.creator,o='<li class="h-entry hentry">',a="<a class='p-name entry-title u-url' href='"+t+"' target='_blank'>\n                       <span>"+n+"</span>\n                     </a><br>";return this.configs.show_entry_summary&&i.length&&(a+="<p class='p-summary summary'>"+i+"</p>"),this.configs.show_entry_author&&s.length&&(a+="<p class='p-author author'>Posted By: "+s+"</p>"),o+=a+"</li>"}},{key:"validFeedId",value:function(){return this.feedId().length>10}},{key:"feedId",value:function(){return this.configs.feed_url}},{key:"showFeedToggle",value:function(){return this.configs[this.type+"_feed_toggle"]===!0}}]),t}(Feed),TwitterFeed=function(e){function t(e,n){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,"twitter"))}return _inherits(t,e),_createClass(t,[{key:"url",value:function(){return"//g5-social-feed-service.herokuapp.com/twitter-feed/"+this.configs.twitter_username}},{key:"icon",value:function(){return"<svg enable-background='new 0 0 512 512' height='40' style='max-width:100%; max-height:100%;' version='1.1' viewBox='0 0 512 512' width='40' x='0px' xmlns='http://www.w3.org/2000/svg' y='0px'>\n        <path alt='twitter' class='social-feed-icon twitter-social-feed-icon' d='M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764 c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787 c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574 c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699 C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435 C436.339,160.061,450.668,145.174,462,128.223z'>\n        </path>\n      </svg>"}},{key:"feedList",value:function(e){var t=this,n=[],i=e.slice(0,this.configs.tweet_count);return i.forEach(function(e){n.push(t.feedItem(e))}),n.join("")}},{key:"feedItem",value:function(e){var t=this.configs.display_avatar?"<span class='post-thumb'><img src='"+e.user.profile_image_url_https.replace("_normal","")+"'></span>":"";return"<li>\n              "+t+"\n              <div><a href='https://twitter.com/"+e.user.screen_name+"' class='tweet-name author-name' target='_blank'> "+e.user.screen_name+" says:</a></div>\n              <span class='tweet-text'>"+e.text+"</span>\n            </li>"}},{key:"feedLink",value:function(){return"<a class='btn' href='http://www.twitter.com/"+this.configs.twitter_username+"' href='#' target='_blank'>Read All</a>"}},{key:"feedId",value:function(){return this.configs.twitter_username}}]),t}(Feed),FacebookFeed=function(e){function t(e,n){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,"facebook"))}return _inherits(t,e),_createClass(t,[{key:"url",value:function(){return"//g5-social-feed-service.herokuapp.com/facebook-feed.json?facebook_page_id="+this.configs.facebook_page_id}},{key:"icon",value:function(){return"<svg enable-background='new 0 0 512 512' height='40' style='max-width:100%; max-height:100%;' version='1.1' viewBox='0 0 512 512' width='40' x='0px' xmlns='http://www.w3.org/2000/svg' y='0px'>\n         <path alt='facebook' class='social-feed-icon facebook-social-feed-icon' d='M204.067,184.692h-43.144v70.426h43.144V462h82.965V254.238h57.882l6.162-69.546h-64.044 c0,0,0-25.97,0-39.615c0-16.398,3.302-22.89,19.147-22.89c12.766,0,44.896,0,44.896,0V50c0,0-47.326,0-57.441,0 c-61.734,0-89.567,27.179-89.567,79.231C204.067,174.566,204.067,184.692,204.067,184.692z'>\n         </path>\n       </svg>"}},{key:"success",value:function(e){e.hasOwnProperty("data")&&_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateFeed",this).call(this,e.data)}},{key:"feedList",value:function(e){var t=this,n=[],i=[];e.forEach(function(e){void 0!==e.message&&i.push(e)});var s=i.slice(0,this.configs.facebook_post_limit);return s.forEach(function(e){n.push(t.feedItem(e))}),n.join("")}},{key:"feedLink",value:function(){return"<a class='btn' href='https://www.facebook.com/"+this.configs.facebook_page_id+"' href='#' target='_blank'>Read All</a>"}},{key:"feedItem",value:function(e){var t=300,n=this.configs.display_avatar&&e.picture?"<span class='post-thumb'><img src='"+e.picture+"'></span>":"",i=e.message,s=i,o=e.id.split("_"),a=o[0],r=o[1],c="https://www.facebook.com/"+a+"/posts/"+r;return i.length>t&&(i=i.substring(0,t),s=i+"...<br><a href='"+c+'\' target="_blank">Read More</a>'),"<li>\n              "+n+"\n              <div class='facebook-name tweet-name author-name'><a href='http://facebook.com/"+e.from.id+"' class='author-name' target='_blank'>"+e.from.name+" said:</a></div>\n              <div class='facebook-post'>"+s+"</div>\n            </li>"}},{key:"feedId",value:function(){return this.configs.facebook_page_id}}]),t}(Feed),GoogleFeed=function(e){function t(e,n){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,"google"))}return _inherits(t,e),_createClass(t,[{key:"url",value:function(){return"//g5-social-feed-service.herokuapp.com/google-plus-feed/"+this.configs.google_plus_page_id}},{key:"icon",value:function(){return"<svg enable-background='new 0 0 512 512' height='40' style='max-width:100%; max-height:100%;' version='1.1' viewBox='0 0 512 512' width='40' x='0px' xmlns='http://www.w3.org/2000/svg' y='0px'>\n         <path alt='google' class='social-feed-icon google-social-feed-icon' d='M462,141.347h-54.621v54.622h-27.311v-54.622h-54.622v-27.311h54.622V59.416h27.311v54.621H462V141.347z M307.583,367.26  c0,40.943-37.384,90.787-131.434,90.787C107.365,458.047,50,428.379,50,378.478c0-38.514,24.383-88.511,138.323-88.511 c-16.922-13.792-21.075-33.077-10.733-53.959c-66.714,0-100.879-39.222-100.879-89.023c0-48.731,36.242-93.032,110.15-93.032 c18.66,0,118.398,0,118.398,0l-26.457,27.77h-31.079c21.925,12.562,33.586,38.433,33.586,66.949 c0,26.175-14.413,47.375-34.983,63.279c-36.503,28.222-27.158,43.98,11.087,71.872C295.121,312.074,307.583,333.882,307.583,367.26 z M233.738,150.453c-5.506-41.905-32.806-76.284-64.704-77.243c-31.909-0.949-53.309,31.119-47.798,73.035 c5.509,41.905,35.834,71.178,67.749,72.139C220.882,219.333,239.242,192.363,233.738,150.453z M266.631,371.463 c0-34.466-31.441-67.317-84.192-67.317c-47.542-0.523-87.832,30.042-87.832,65.471c0,36.154,34.335,66.25,81.879,66.25 C237.267,435.866,266.631,407.617,266.631,371.463z'>\n         </path>\n       </svg>"}},{key:"feedList",value:function(e){var t=this,n=[],i=e.filter(function(e){var t=e.attributes.object;return t.content.length||t.attachments});return i=i.slice(0,this.configs.google_plus_post_limit),i.forEach(function(e){n.push(t.feedItem(e.attributes))}),n.join("")}},{key:"feedLink",value:function(){return"<a class='btn' href='https://plus.google.com/"+this.configs.google_plus_page_id+"' href='#' target='_blank'>Read All</a>"}},{key:"feedItem",value:function(e){var t=this.configs.display_avatar?"<span class='post-thumb'><img src='"+e.actor.image.url+"'></span>":"",n=this.feedItemContent(e),i="<li>\n                   "+t+"\n                   <div class='google-name author-name'><a href='"+e.actor.url+"' class='author-name' target='_blank'>"+e.actor.displayName+" said:</a></div>\n                   <div class='google-post'>"+n+"</div>\n                  </li>";return n?i:""}},{key:"feedItemContent",value:function(e){return e.object.content?e.object.content:!!e.object.attachments&&e.object.attachments[0].content}},{key:"feedId",value:function(){return this.configs.google_plus_page_id}}]),t}(Feed),InstagramFeed=function(e){function t(e,n){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,"instagram"))}return _inherits(t,e),_createClass(t,[{key:"url",value:function(){return"//g5-social-feed-service.herokuapp.com/instagram-feed.json?instagram_id="+this.configs.instagram_user_id+"&instagram_number_of_photos="+this.configs.instagram_number_of_photos}},{key:"icon",value:function(){return"<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" enable-background='new 0 0 512 512'   viewBox='0 0 1000 1000' height='40' width='40' x='0px' y='0px'>\n              <path alt=\"instagram\" class=\"social-feed-icon instagram-social-feed-icon\" d=\"m504 917 q-139 0 -199 -2.5t-98 -17.5q-70 -26 -97 -98q-14 -36 -16.5 -96t-2.5 -199t2.5 -199t17.5 -98q26 -70 98 -97q36 -14 96 -16.5t199 -2.5t199 2.5t93.5 15.5t61.5 41t41 61.5t15.5 93.5t2.5 199t-2.5 199t-17.5 98q-26 70 -98 97q-36 14 -96 16.5t-199 2.5zm-453 -36q76 116 243 124q69 3 210 3t210 -3q110 -5 183 -60q34 -24 55.5 -57t29.5 -54q20 -52 23 -120.5t3 -209.5t-3 -209.5t-21.5 -116.5t-62 -91.5t-91.5 -62t-116.5 -21.5t-209.5 -3t-210 3q-167 8 -243 124q-43 67 -48 169q-3 67 -3 208t3 210q5 100 48 167zm453 -118q107 0 183 -76t76 -183t-76 -183t-183 -76t-183 76t-76 183t76 183t183 76zm0 -427q70 0 119 49t49 119t-49 119t-119 49t-119 -49t-49 -119t49 -119t119 -49zm226.5 0m-25.05 -96c0 -31.52992 25.53924 -57.06916 57.06916 -57.06916c31.52992 0 57.06916 25.53924 57.06916 57.06916c0 31.52992 -25.53924 57.06916 -57.06916 57.06916c-31.52992 0 -57.06916 -25.53924 -57.06916 -57.06916z\"></path>\n            </svg>"}},{key:"success",value:function(e){e.hasOwnProperty("data")&&_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateFeed",this).call(this,e.data)}},{key:"feedList",value:function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.feedItem(e))}),n.join("")}},{key:"feedLink",value:function(){return"<a class='btn' href='https://www.instagram.com/"+this.configs.instagram_user_name+"' href='#' target='_blank'>Read All</a>"}},{key:"feedItem",value:function(e){var t="<a href='"+e.link+"' target='_blank'> <img src='"+e.images.thumbnail.url+"'></a>";return'<li class="instagram_images">\n              '+t+"\n            </li>"}},{key:"feedId",value:function(){return this.configs.instagram_user_id}}]),t}(Feed);G5.loadWidgetConfigs(".social-feed .config",SocialFeedWidget);