(function(){var t;t=function(){function t(t){this.configs=t,null!=this.configs&&(this.widget=$("#"+this.configs.widgetId),this.userSelectOptions=this.configs.user_select_forms,this.clsUrl=this.configs.secure_cls_url,this.locationUrn=this.configs.location_urn,this.submitHackUrn=this.configs.hack_urn,this.form=this.widget.find("form"),this.formSelectDropdown=this.widget.find(".user-form-options"),this.leadSlugForLocSelect=this.configs.form_to_append_location_select,this.locationDropdown=this.widget.find(".location-select"),this.runLocSelectOnce=!1,this.userSelect(),this.triggerEnhancer(),this.hideLocationSelect(),this.appendLocationDropdown())}return t.prototype.userSelect=function(){var t;if(this.userSelectOptions)return t='<div class="user-form-select" style="margin-bottom:15px;">\n  <h4>Please select the type of form you would like to submit</h4>\n  <select class="user-form-options"></select>\n</div>',this.widget.prepend(t),$.each(this.userSelectOptions,function(t){return function(e,n){var i,o;return i=t.clsUrl+"/api/v1/locations/"+t.locationUrn+"/html_forms/"+e,o='<option value="'+i+'">'+n+"</option>",t.widget.find(".user-form-options").append(o)}}(this))},t.prototype.triggerEnhancer=function(){var t;return t=this,this.widget.find(".user-form-options").change(function(){var e;return e=$(this).attr("value"),t.runLocSelectOnce=!1,window.G5Leads.g5FormEnhancer({formUrl:e,enhanceClass:t.configs.widgetId+".lead-form .g5-enhanced-form"})})},t.prototype.triggerUrnSwap=function(){var t;if("true"===this.submitHackUrn)return this.widget.find(".g5-enhanced-form .location-list-urn option:selected").prop("selected",!1),this.widget.find(".g5-enhanced-form .location-list-urn option:first").attr("selected","selected"),t=$("input[type='hidden'][name='location-list-select']"),this.widget.find(".location-list-urn").change(function(){var e,n,i,o;return o=$(this).attr("value"),t.remove(),n=$(this).parent().parent(),e=n.attr("action"),i=e.split("/"),i.splice(6,1,o),n.attr("action",i.join("/"))})},t.prototype.hideLocationSelect=function(){return $(window).on("G5FormResponseComplete",function(t){return function(){return t.widget.find(".location-select").hide(),t.widget.find(".user-form-select").hide()}}(this))},t.prototype.appendLocationDropdown=function(){if(""!==this.leadSlugForLocSelect)return $(window).on("G5FormRendered",function(t){return function(){var e,n;if(e=t.widget.find(".g5-enhanced-form ."+t.leadSlugForLocSelect),e.length&&!t.runLocSelectOnce)return n=t.widget.find("."+t.leadSlugForLocSelect+" div:first"),t.locationDropdown.clone().insertBefore(n).fadeIn(),t.triggerUrnSwap(),t.runLocSelectOnce=!0}}(this))},t}(),G5.loadWidgetConfigs(".lead-configs",t)}).call(this);