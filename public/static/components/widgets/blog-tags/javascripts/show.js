(function(){var t,e,n,i,r,a;r=function(){function e(e){this.configs=e,this.widget=$("#"+this.configs.widgetId),new i(this.configs,this.widget),window.addEventListener("popstate",function(t){return function(e){return new i(t.configs,t.widget)}}(this)),$(window).on("tagChange",function(e){return function(n){return new t(e.widget)}}(this))}return e}(),i=function(){function t(t,i){var r,a;this.configs=t,this.widget=i,a=this.configs.newsServiceDomain+"/locations/"+this.configs.locationURN+"/tags.json",r=new e(a),$(r).bind("feedReady",function(t){return function(e){var i;return i=r.feed.tags,new n(i,t.widget)}}(this)),r.getFeed()}return t}(),n=function(){function e(t,e){this.tags=t,this.widget=e,this.buildMarkup(),this.clickListeners()}return e.prototype.buildMarkup=function(){var e,n,i,r,a,o;for(this.widget.find(".tag-link").remove(),r=[],r.push("<a href='#' class='tag-link' data-tag='all'>All</a>"),a=this.tags,n=e=0,i=a.length;e<i;n=++e)o=a[n],r.push("<a href='#' class='tag-link' data-tag='"+o.name+"'>"+this.titleize(o.name)+"</a>");return this.widget.append(r.join("")),new t(this.widget)},e.prototype.clickListeners=function(){var t;return t=this,this.widget.on("click",".tag-link",function(){var e;return e=$(this).data("tag"),t.updateUrl("tag",e),$(window).trigger("tagChange"),!1})},e.prototype.updateUrl=function(t,e){var n,i;return n=window.location.pathname,i=t&&e?"?"+t+"="+e:"",window.history.pushState({},"",""+n+i)},e.prototype.titleize=function(t){var e,n,i,r,a,o;for(o=t.split("-"),e=[],i=n=0,r=o.length;n<r;i=++n)a=o[i],e.push(a.charAt(0).toUpperCase()+a.toLowerCase().slice(1));return e.join(" ")},e}(),e=function(){function t(t){this.url=t}return t.prototype.getFeed=function(){return this.feedFromStorage()?$(this).trigger("feedReady"):this.fetch()},t.prototype.fetch=function(){return $.ajax({url:this.url,dataType:"json",success:function(t){return function(e,n,i){return t.feed=e,t.storeFeed(),$(t).trigger("feedReady")}}(this),error:function(t){return function(t,e,n){}}(this)})},t.prototype.feedFromStorage=function(){try{return this.feed=JSON.parse(sessionStorage.getItem(this.url))}catch(t){return null}},t.prototype.storeFeed=function(){try{return sessionStorage.setItem(this.url,JSON.stringify(this.feed))}catch(t){return null}},t}(),t=function(){function t(t){var e,n,i;this.widget=t,this.widget.find(".tag-link").removeClass("active-tag"),i=new a("tag").value(),n=sessionStorage.getItem("currentTag"),e=i?i:n,e?this.widget.find(".tag-link[data-tag='"+e+"']").addClass("active-tag"):this.widget.find(".tag-link[data-tag='all']").addClass("active-tag")}return t}(),a=function(){function t(t){this.param=t}return t.prototype.value=function(){var t,e,n;return t=this.param.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=e.exec(location.search),null!==n&&decodeURIComponent(n[1].replace(/\+/g," "))},t}(),G5.loadWidgetConfigs(".blog-tags .config",r)}).call(this);