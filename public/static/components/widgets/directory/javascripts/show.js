"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(i,t,s){return t&&e(i.prototype,t),s&&e(i,s),i}}(),DirectoryWidget=function(){function e(i){_classCallCheck(this,e),this.configs=i,this.widget=$("#"+this.configs.widgetId),Object.assign(this,{SMALL_WIDTHL:400,MEDIUM_WIDTH:525,LARGE_WIDTH:768,FULL_WIDTH:910,configs:i}),this.expand=this.configs.expandOption||"first_open",this.cpnsUrl=this.configs.cpnsUrl,this.clientUrn=this.configs.clientUrn,this.table=this.widget.find(".directory-table"),this.headers=this.widget.find(".directory-heading"),this.initResize(),this.initHeaders(),this.initPhones(),this.initIE(),this.openHeaders()}return _createClass(e,[{key:"initHeaders",value:function(){return this.headers.on("click",function(e){var i=$(e.currentTarget),t=i.hasClass("open"),s=i.next(".directory-locations");if(t)return i.removeClass("open"),s.removeClass("open"),s.css({"max-height":0});i.addClass("open"),s.addClass("open");var n=s.find("table").height();return s.css({"max-height":n+100})})}},{key:"openHeaders",value:function(){if(this.headers&&this.headers.length){if("first_open"===this.expand)return this.headers[0].click();if("all_open"===this.expand)return this.headers.each(function(){return $(this).click()})}}},{key:"initResize",value:function(){var e=this;return $(window).on("resize orientationchange",function(){return e.resize()}),this.resize()}},{key:"resize",value:function(){var e=this.table.parent(".widget"),i=e.width();return i>=this.FULL_WIDTH?this.setSizeClass("full"):i>=this.LARGE_WIDTH?this.setSizeClass("large"):i>=this.MEDIUM_WIDTH?this.setSizeClass("medium"):i>=this.SMALL_WIDTH?this.setSizeClass("small"):this.setSizeClass("tiny"),this.resizeHeaders()}},{key:"resizeHeaders",value:function(){return this.headers.each(function(e,i){var t=$(i);if(t.hasClass("open")){var s=t.next(".directory-locations");return void s.css({"max-height":"none"})}})}},{key:"setSizeClass",value:function(e){if(!this.table.hasClass(e))return this.clearSizeClasses(),this.table.addClass(e)}},{key:"clearSizeClasses",value:function(){return this.table.removeClass("tiny").removeClass("small").removeClass("medium").removeClass("large").removeClass("full")}},{key:"initPhones",value:function(){return this.phoneNumber=new PhoneNumber(this.getPhoneConfigs())}},{key:"getPhoneConfigs",value:function(){var e=void 0;return e={cpnsUrl:this.cpnsUrl,clientUrn:this.clientUrn,locationUrns:this.locationUrns()}}},{key:"locationUrns",value:function(){return this.widget.find(".directory-row").map(function(e,i){var t=$(i).attr("data-location-urn");return{urn:t,scope:"tr[data-location-urn="+t+"]"}})}},{key:"initIE",value:function(){if(this.isIE())return this.table.addClass("isIE")}},{key:"isIE",value:function(){var e=navigator,i=e.userAgent;return!!(i.match(/iemobile/i)||i.match(/msie/i)||i.match(/trident/i))}}]),e}();G5.loadWidgetConfigs(".directory .config",DirectoryWidget);