"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),EditMapWidget=function(){function e(){_classCallCheck(this,e),this.topModal=window.top.$(".modal"),this.stylesBlock=this.topModal.find("#map-styles"),this.mapUrl="/static/components/widgets/map-v2/map.json",this.mapIdField=this.topModal.find(".map-id").first(),this.mapValuesField=this.topModal.find(".map-values").first(),this.loadJSON()}return _createClass(e,[{key:"loadJSON",value:function(){var e=this;$.getJSON(this.mapUrl).done(function(t){e.styles=t.styles,t.styles.length&&(e.buildMarkup(),e.setContent())})}},{key:"buildMarkup",value:function(){var e="",t=parseInt(this.topModal.find(".map-id").val());this.styles.forEach(function(a){var i=t===a.id,n=i?" selected":"",s=i?" checked='checked'":"";e+="<div class='map-wrap"+n+"'><h3>"+a.name+"</h3>",e+="<img src='"+a.imageUrl+"'>",e+="<input type='radio' name='map-type' value='"+a.id+"'"+s+"></div>"}),this.stylesBlock.append(e)}},{key:"setContent",value:function(){var e=this,t=this.stylesBlock.find(".map-wrap");t.on("click",function(a){var i=$(a.currentTarget),n=i.find("input:radio"),s=parseInt(n.val());t.removeClass("selected"),i.addClass("selected"),n.attr("checked",!0),e.styles.forEach(function(t){t.id===s&&(e.currentStyle=t.json.replace(/'/g,'"'),e.currentId=t.id)}),e.mapIdField.val(e.currentId),e.mapValuesField.val(e.currentStyle)})}}]),e}();new EditMapWidget;