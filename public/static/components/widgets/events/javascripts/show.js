(function(){var e,t,i;i=function(){function i(i){this.configs=i,this.widget=$("#"+this.configs.widgetId),this.feedURL=this.configs.newsServiceDomain+"/locations/"+this.configs.locationURN+"/calendar_feed.json",this.feedSource=new t(this.feedURL),$(this.feedSource).bind("feedReady",function(t){return function(i){return new e(t.configs,t.feedSource.feed,t.widget)}}(this)),this.feedSource.getFeed()}return i}(),e=function(){function e(e,t,i){this.configs=e,this.feed=t,this.widget=i,this.locationName=this.configs.locationName.length?this.configs.locationName:"another time.",this.buildMarkup(),this.createListeners()}return e.prototype.buildMarkup=function(){var e,t,i,n,s,a,r;for(t=parseInt(this.configs.numberOfPosts),isNaN(t)&&(t=10),i=this.feed.slice(0,t),r=[],s=n=0,a=i.length;n<a;s=++n)e=i[s],r.push("<div class='event-summary summary-closed'> <div class='event-title'>"+e.title+"</div> <div class='event-image'>"+this.imageMarkup(e.image)+"</div> <div class='event-time-summary'> <div class='event-month'>"+e.month+"</div> <div class='event-day'>"+e.day+"</div> <div class='event-time'>"+(e.time||"")+"</div> </div> <a href='#' class='event-details-button'>View Details <span>></span></a> </div> <div class='event-details hidden-details'> <div class='event-specific-details'> <div class='event-date-details'>"+e.date_details+"</div> <div class='event-time-details'>"+(e.time_details||"")+"</div> <div class='event-location'>"+e.event_location+"</div> </div> <div class='event-body'>"+e.text+"</div> </div>");return 0===r.length&&r.push("<div class='no-events'>Please check back for events at "+this.locationName+"</div>"),this.widget.append(r.join(""))},e.prototype.imageMarkup=function(e){var t;return t=""===e?this.configs.defaultImage:e,""!==t?"<img src='"+t+"' "+CloudinaryHelper.responsiveImage(t)+" />":""},e.prototype.createListeners=function(){return this.widget.find("a.event-details-button").click(function(e){return function(t){var i,n;return i=$(t.currentTarget),i.parent().next(".event-details").toggleClass("hidden-details expanded-details"),i.parent().toggleClass("summary-closed summary-open"),"View Details >"===i.text()?(e.widget.find(".event-summary").hide(),i.parent().show(),n="Close Details <span><</span>"):(setTimeout(function(){return e.widget.find(".event-summary").show()},500),n="View Details <span>></span>"),i.html(n),!1}}(this))},e}(),t=function(){function e(e){this.url=e}return e.prototype.getFeed=function(){return this.feedFromStorage()?$(this).trigger("feedReady"):this.fetch()},e.prototype.fetch=function(){return $.ajax({url:this.url,dataType:"json",success:function(e){return function(t,i,n){return e.feed=t,e.storeFeed(),$(e).trigger("feedReady")}}(this),error:function(e){return function(e,t,i){}}(this)})},e.prototype.feedFromStorage=function(){try{return this.feed=JSON.parse(sessionStorage.getItem(this.url))}catch(e){return null}},e.prototype.storeFeed=function(){try{return sessionStorage.setItem(this.url,JSON.stringify(this.feed))}catch(e){return null}},e}(),G5.loadWidgetConfigs(".events .config",i)}).call(this);