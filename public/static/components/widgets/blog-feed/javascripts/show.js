(function(){var t,e,i,n,o,s,a,r,p,l;window.initialBlogPageLoad=!0,n=function(){function t(t){this.configs=t,G5.fortAwesomeApi.registerWidget(this,"fortAwesomeLoaded"),new e(this.configs),window.addEventListener("popstate",function(t){return function(i){return new e(t.configs)}}(this)),$(window).on("tagChange",function(t){return function(i){return new e(t.configs)}}(this))}return t}(),e=function(){function e(e){var n,r;this.configs=e,r=this.buildFeedURL(),n=new i(r),$(n).bind("feedReady",function(e){return function(i){var o,r,u,c;return o=n.feed,new s(o),c=new l(e.configs,o),c.clearAllPosts(),r=new a("article").value(),r?(u=new p(r,e.configs,o),u.buildSelectedPost(),c.paginationListener()):"full-page"===e.configs.uiType?(new t(e.configs,o),c.fullViewListener(),c.paginationListener()):(new t(e.configs,o),c.basicListener(),c.paginationListener())}}(this)),n.getFeed(),new o(this.configs)}return e.prototype.buildFeedURL=function(){var t,e,i,n,o,s,r,p;return o=new a("article").value(),r=new a("tag").value(),r&&(window.currentTag=r),s=new a("page").value(),o?(t=this.configs.newsServiceDomain+"/locations/"+this.configs.locationURN+"/posts/"+o+".json",p=window.currentTag?window.currentTag:"all",e=t+"?tag="+p):(t=this.configs.newsServiceDomain+"/locations/"+this.configs.locationURN+"/blog_feed.json",n=parseInt(this.configs.numberOfPosts),isNaN(n)&&(n=20),p=r?r:"all",i=s?s:"1",e=t+"?tag="+p+"&page="+i+"&per_page="+n)},e}(),t=function(){function t(t,e){this.configs=t,this.widget=$("#"+this.configs.widgetId),this.feed=e.posts,this.populateFeed(),this.buildPaginationLinks(e.meta)}return t.prototype.populateFeed=function(){var t,e,i,n,o,s;for(n=[],s=this.feed,e=t=0,i=s.length;t<i;e=++t)o=s[e],n.push("<div class='news-feed-post'> "+this.toggleMarkup(o,e)+" "+this.detailsMarkup(o)+" <div class='post-body'>"+o.text+"</div> "+this.bottomToggles(o,e)+" </div>");return this.widget.append(n.join(""))},t.prototype.pathForPost=function(t){return(new r).pathForPost(t)},t.prototype.toggleMarkup=function(t,e){var i,n;return i="<a class='post-toggle' href='"+this.pathForPost(t)+"' data-post-slug='"+t.title_slug+"' data-post-index='"+e+"'>",n=i,""!==t.image&&"true"===this.configs.displayPhotos&&(n+="  <img src='"+t.image+"' "+CloudinaryHelper.responsiveImage(t.image)+" />"),n+="</a>",n+=i,""!==t.title&&(n+="  <h1 class='post-title'>"+t.title+"</h1>"),n+="</a>"},t.prototype.bottomToggles=function(t,e){var i;return i="<a class='post-toggle toggle-button post-expand' href='"+this.pathForPost(t)+"' data-post-index='"+e+"' data-post-slug='"+t.title_slug+"'>Read More</a>","full-page"!==this.configs.uiType&&(i+="<a class='post-toggle toggle-button post-collapse' href='#'>Hide This</a>"),i},t.prototype.detailsMarkup=function(t){var e;return""!==t.title&&(e="<span class='post-date'>"+t.pretty_date+"</span>"),""!==t.author&&(e+="<span>|</span><span class='post-author'>by "+t.author+"</span>"),e+="<div class='post-description'>"+t.description+"</div>"},t.prototype.buildPaginationLinks=function(t){var e,i,n,o,s,a,r;if(s=[],t.total_pages>1){for(1!==t.page&&s.push("<a href='#' class='pagination-button pagination-text prev' data-page-number='"+(t.page-1)+"' data-tag='"+t.tag+"'><i class='fa fa-chevron-left'></i> <span class='previous-next'>Previous Page</span></a>"),o=i=1,r=t.total_pages;1<=r?i<=r:i>=r;o=1<=r?++i:--i)e=o===t.page?"active-page":"",n=o===t.total_pages?"last":"",s.push("<a href='#' class='pagination-button page-button "+e+" "+n+"' data-page-number='"+o+"' data-tag='"+t.tag+"'>"+o+"</a>");return t.page!==t.total_pages&&s.push("<a href='#' class='pagination-button pagination-text next' data-page-number='"+(t.page+1)+"' data-tag='"+t.tag+"'><span class='previous-next'>Next Page</span> <i class='fa fa-chevron-right'></i></a>"),a="<div class='blog-pagination'> "+s.join("")+" </div>",$(".news-feed-widget").append(a),$(a).insertAfter("#news-feed-top")}},t}(),p=function(){function t(t,e,i){this.slug=t,this.configs=e,this.widget=$("#"+this.configs.widgetId),this.post=i.post,this.next=this.post.next,this.previous=this.post.previous}return t.prototype.pathForPost=function(t){return(new r).pathForPost(t)},t.prototype.buildSelectedPost=function(){var t,e,i;return t=this.post,e="<div class='news-feed-single-post'> <div class='article-top'>"+this.fullListLink(t)+"</div> "+this.imageMarkup(t)+" <h1 class='post-title'>"+t.title+"</h1> <span class='post-date'>"+t.pretty_date+"</span> "+this.authorMarkup(t)+" "+this.tagsMarkup(t)+" <div class='post-body'>"+t.text+"</div> "+this.addToAnyCode()+" <div class='posts-nav'> "+this.previousButton()+" <a href='#' class='all-posts'>See More News</a> "+this.nextButton()+" </div> </div>",this.widget.append(e),i=new l(this.configs,this.feed),i.fullViewListener(),i.listViewListener(),i.tagButtonListener()},t.prototype.nextButton=function(){return this.next?" <a href='"+this.pathForPost(this.next)+"' data-post-slug='"+this.next.title_slug+"' class='post-toggle next-post'> <div class='post-nav-top'> <span>Next</span> <i class='fa fa-chevron-right'></i> </div> <div> "+this.navImageMarkup(this.next)+" <div class='post-title'>"+this.next.title+"</div> <div class='post-date'>"+this.next.pretty_date+"</div> "+this.authorMarkup(this.next)+" </div> </a> ":""},t.prototype.imageMarkup=function(t){return"true"===this.configs.displayPhotos&&""!==t.image?"<img src='"+t.image+"' "+CloudinaryHelper.responsiveImage(t.image)+" />":""},t.prototype.authorMarkup=function(t){return""!==t.author?"<span class='author-divider'>|</span><span class='post-author'>by "+t.author+"</span>":""},t.prototype.tagsMarkup=function(t){var e,i,n,o,s,a,r;if(!t.tags.length)return"";for(e=window.location.pathname,s=[],s.push("<div class='post-tags'>"),s.push("<a href='#' data-tag='all' class='article-tag'>All</a>"),a=t.tags,n=i=0,o=a.length;i<o;n=++i)r=a[n],s.push("<a href='#' data-tag='"+r.name+"' class='article-tag'>"+this.titleize(r.name)+"</a>");return s.push("</div>"),s.join(" ")},t.prototype.previousButton=function(){return this.previous?" <a href='"+this.pathForPost(this.previous)+"' data-post-slug='"+this.previous.title_slug+"' class='post-toggle previous-post'> <div class='post-nav-top'> <i class='fa fa-chevron-left'></i> <span>Previous</span> </div> <div> "+this.navImageMarkup(this.previous)+" <div class='post-title'>"+this.previous.title+"</div> <div class='post-date'>"+this.previous.pretty_date+"</div> "+this.authorMarkup(this.previous)+" </div> </a> ":""},t.prototype.navImageMarkup=function(t){var e,i,n;return n="","true"===this.configs.displayPhotos&&(e=t.image,""===e&&(e=this.configs.defaultImage),""!==e&&(i="<img src='"+e+"' "+CloudinaryHelper.responsiveImage(e)+" />"),i&&(n="<div class='post-image-wrapper'><div>"+i+"</div></div>")),n},t.prototype.fullListLink=function(){var t,e,i,n,o;return t=window.currentTag?window.currentTag:"all",n=parseInt(this.configs.numberOfPosts),isNaN(n)&&(n=20),o=this.post.index_in_feed/n,i=Math.ceil(o),e=""===this.configs.returnToListText?"Back To List":this.configs.returnToListText,"<a href='#' class='pagination-button pagination-text prev' data-page-number='"+i+"' data-tag='"+t+"'><i class='fa fa-chevron-left'></i> "+e+"</a>"},t.prototype.addToAnyCode=function(){return"true"===this.configs.shareButtons?" <div class='a2a_kit a2a_kit_size_32 a2a_default_style'> <a class='a2a_dd' href='https://www.addtoany.com/share'></a> <a class='a2a_button_facebook'></a> <a class='a2a_button_twitter'></a> <a class='a2a_button_google_plus'></a> </div> <script type='text/javascript' src='//static.addtoany.com/menu/page.js'></script> ":""},t.prototype.titleize=function(t){var e,i,n,o,s,a;for(a=t.split("-"),e=[],n=i=0,o=a.length;i<o;n=++i)s=a[n],e.push(s.charAt(0).toUpperCase()+s.toLowerCase().slice(1));return e.join(" ")},t}(),l=function(){function t(t,e){this.configs=t,this.feed=e,this.widget=$("#"+this.configs.widgetId)}return t.prototype.basicListener=function(){return this.widget.find(".post-toggle").click(function(t){return function(e){return $(e.currentTarget).siblings(".post-description, .post-body").slideToggle(),$(e.currentTarget).parent().toggleClass("active-post"),t.scrollToPost(),window.noEvent(e)}}(this))},t.prototype.fullViewListener=function(){return this.widget.find(".post-toggle").click(function(t){return function(i){var n;return n=$(i.currentTarget).data("post-slug"),t.clearAllPosts(),t.updateUrl([["article",n]]),new e(t.configs),t.scrollToPost(),window.noEvent(i)}}(this))},t.prototype.listViewListener=function(){return this.widget.find(".all-posts").click(function(t){return function(i){return t.updateUrl([[null,null]]),new e(t.configs),$(window).trigger("tagChange"),window.noEvent(i)}}(this))},t.prototype.tagButtonListener=function(){return this.widget.find(".article-tag").click(function(t){return function(i){var n;return n=$(i.currentTarget).data("tag"),t.updateUrl([["tag",n]]),new e(t.configs),$(window).trigger("tagChange"),window.noEvent(i)}}(this))},t.prototype.paginationListener=function(){return this.widget.find(".pagination-button").click(function(t){return function(i){var n,o,s;return n=$(i.currentTarget),o=n.data("page-number"),s=n.data("tag"),t.updateUrl([["tag",s],["page",o]]),new e(t.configs),window.noEvent(i)}}(this))},t.prototype.clearAllPosts=function(){return window.initialBlogPageLoad?(window.initialBlogPageLoad=!1,this.widget.find(".blog-loading").remove()):this.widget.find(".news-feed-single-post, .news-feed-post, .blog-pagination").remove()},t.prototype.scrollToPost=function(){var t,e,i,n,o;return $("html, body").scrollTop(0),n=$("header[role=banner]"),i=0,t=!n.hasClass("fixed-header"),"fixed"===n.css("position")&&t?(e=n.find(".logo").outerHeight(),o=n.outerHeight(),i=Math.max(e,o)):n.find("*").each(function(){var t;if(t=$(this),"fixed"===t.css("position"))return i=t.outerHeight()}),$("html, body").animate({scrollTop:this.widget.offset().top-i},420)},t.prototype.updateUrl=function(t){var e,i,n,o,s,a,r;for(e=window.location.pathname,a=[],n=i=0,o=t.length;i<o;n=++i)s=t[n],s[0]&&s[1]&&a.push(s[0]+"="+s[1]);return r=a.length?"?"+a.join("&"):"",window.history.pushState({},"",""+e+r)},t}(),i=function(){function t(t){this.url=t}return t.prototype.getFeed=function(){return this.feedFromStorage()?$(this).trigger("feedReady"):this.fetch()},t.prototype.fetch=function(){return $.ajax({url:this.url,dataType:"json",success:function(t){return function(e,i,n){return t.feed=e,t.storeFeed(),$(t).trigger("feedReady")}}(this),error:function(t){return function(t,e,i){}}(this)})},t.prototype.feedFromStorage=function(){try{return this.feed=JSON.parse(sessionStorage.getItem(this.url))}catch(t){return null}},t.prototype.storeFeed=function(){try{return sessionStorage.setItem(this.url,JSON.stringify(this.feed))}catch(t){return null}},t}(),r=function(){function t(){}return t.prototype.pathForPost=function(t){var e;return e=window.location.pathname,window.location.pathname+"?article="+t.title_slug},t}(),o=function(){function t(t){this.configs=t,this.widget=$("#"+this.configs.widgetId),this.applyWidthClasses(),$(window).resize(function(t){return function(){return t.applyWidthClasses()}}(this))}return t.prototype.applyWidthClasses=function(){return this.widget.width()<=460?this.widget.removeClass("wide").addClass("narrow"):this.widget.removeClass("narrow").addClass("wide")},t}(),a=function(){function t(t){this.param=t}return t.prototype.value=function(){var t,e,i;return t=this.param.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search),null!==i&&decodeURIComponent(i[1].replace(/\+/g," "))},t}(),s=function(){function t(t){this.feed=t,this.getOriginalTags(),this.setTitleTag(),this.setMetaDescription(),this.setCanonical()}return t.prototype.setTitleTag=function(){var t,e;return this.feed.post?(e=document.createElement("textarea"),e.innerHTML=this.feed.post.title,t=e.value,document.title=t):document.title=this.originalTitle},t.prototype.setMetaDescription=function(){var t;return t=$("meta[name='description']"),this.feed.post?t.attr("content",this.feed.post.description):t.attr("content",this.originalDescription)},t.prototype.setCanonical=function(){var t,e;return t=$("link[rel='canonical']"),this.feed.post?(e=this.originalCanonical+"?article="+this.feed.post.title_slug,t.attr("href",e)):t.attr("href",this.originalCanonical)},t.prototype.getOriginalTags=function(){return window.originalTitle||(window.originalTitle=document.title,window.originalDescription=$("meta[name='description']").attr("content"),window.originalCanonical=$("link[rel='canonical']").attr("href")),this.originalTitle=window.originalTitle,this.originalDescription=window.originalDescription,this.originalCanonical=window.originalCanonical},t}(),G5.loadWidgetConfigs(".blog-feed .config",n)}).call(this);