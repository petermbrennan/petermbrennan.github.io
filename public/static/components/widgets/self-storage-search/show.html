<script src="https://use.fonticons.com/26805d78.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/v2.0.0/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v2.0.0/mapbox.css' rel='stylesheet' />
<div id="self-storage-search self-storage-search-{{widget.id}}" class="self-storage-search widget">

  <script>
    if (window.G5Leads == null) {
        window.G5Leads = {};
    }
    window.G5Leads.disableWebshims = true

    var sssEmberAppConfig = {
      "modulePrefix":"self-storage-search",
      "environment":"production",
      "baseURL":"/",
      "locationType":"hash",
      "EmberENV":{
      },
      "APP":{
        "rootElement":"#sss-container",
        "client_id":"{{ widget.client_urn.value }}",
        "apiHost":"{{ widget.api_host.value }}",
        "storePriceText": "{{ widget.store_price_text.value_or_default }}",
        "webPriceText": "{{ widget.web_price_text.value_or_default }}",
        "specialPriceText": "{{ widget.special_price_text.value_or_default }}",
        "rangeSliderStart": "{{ widget.range_start.value_or_default }}",
        "rangeRadiusMax": "{{ widget.range_max.value_or_default }}",
        "rangeRadiusStep": "{{ widget.range_step.value_or_default }}",
        "searchHeading": "{{ widget.search_heading.value_or_default }}",
        "pendingLocationToggle": "{{widget.pending_location_toggle.value_or_default}}",
        "hideCategorySelect": "{{widget.hide_category_select.value_or_default}}",
        "toggleEmptyCategory":"{{widget.empty_category_badge_toggle.value_or_default}}",
        "mobileSelectCategoryLabel":"{{widget.mobile_select_category_label.value}}",
        "scrollSelectorOffset":"{{widget.scroll_selector_offset.value}}",
        "cpnsUrl": "{{widget.client_cpns_url.value_or_default}}",
        "elease": {
          "pusherTimeoutDuration": "10000",
          "moveInCostServiceHost": "{{ widget.move_in_service_api.value_or_default }}"
        },
        'mapbox': {
          accessToken:'pk.eyJ1IjoiZzVsZXZpYnJvd24iLCJhIjoiVXBockRSOCJ9.6HLfrsqLqgQSrTHG0jPYkw',
          mapIdentifier: 'g5levibrown.j3m5jbl8'
        },
        pagination: {
          per_page: "{{ widget.pagination_per_page.value_or_default }}"
        },
        "searchInputPlaceholder": "{{widget.search_input_placeholder.value_or_default}}"
      },
      "exportApplicationGlobal":false
    }

    var sssMetaConfig = document.createElement('meta');
        sssMetaConfig.id="ember-meta";
        sssMetaConfig.name = "self-storage-search/config/environment";
        sssMetaConfig.content = JSON.stringify(sssEmberAppConfig);
    document.getElementsByTagName('head')[0].appendChild(sssMetaConfig);
  </script>

  <style>
    .self-storage-search{
      overflow: visible;
      width: 100%;
      min-height: 400px;
    {% if widget.widget_container_margin.value != blank %}
      margin-top: {{widget.widget_container_margin.value}};
    {% endif %}
    }

    {% if widget.bg_search_criteria.value != blank %}
      /* bg_search_criteria customizations PRIMARY-criteria*/
      .sss-corp-search .sss-search-criteria,
      .sss-corp-search .map-liquid-container{ background-color: {{widget.bg_search_criteria.value}}; }
    {% endif %}

    {% if widget.tt_select_hover.value_or_default != blank %}
      /* tt_select_hover customizations */
      .sss-corp-search .tt-suggestion:hover{ background-color: {{widget.tt_select_hover.value_or_default}}; }
    {% endif %}

    {% if widget.bg_cta_elements.value != blank %}
      /* bg_cta_elements customizations */
      .sss-corp-search .sss-cat.view-all a,
      .sss-corp-search .sss-search-btn,
      .sss-corp-search .sss-unit-cta .unit-cta,
      .sss-corp-search .sss-unit-cta .phoneCTAText{ background-color: {{widget.bg_cta_elements.value}}; }

      .sss-corp-search .sss-cat.view-all a:hover,
      .sss-corp-search .sss-search-btn:hover,
      .sss-corp-search .sss-unit-cta .unit-cta:hover{ background-color: {{ widget.bg_cta_elements.value_or_default_parsed | lighten: '10%'; }}; }
    {% endif %}

    {% if widget.color_phone_desktop.value != blank %}
      /* phone CTA desktop - color */
      .sss-corp-search.xlarge .sss-unit-cta .phoneCTAText,
      .sss-corp-search.large .sss-unit-cta .phoneCTAText,
      .sss-corp-search.full .sss-unit-cta .phoneCTAText{ color: {{widget.color_phone_desktop.value}}; }
    {% endif %}

    {% if widget.bg_category_badge.value != blank %}
      /* Category Badge BG customizations */
      .sss-corp-search .sss-cat,
      .sss-corp-search .map .view-loc.btn{ background-color: {{widget.bg_category_badge.value}}; }
    {% endif %}

    {% if widget.bg_category_dropdown.value != blank %}
      /* bg_category_dropdown customizations */
      .sss-corp-search .sss-search-storage-categories-select{ background-color:{{widget.bg_category_dropdown.value}}; }
    {% endif %}

    {% if widget.color_category_dropdown.value != blank %}
      /* color_category_dropdown customizations */
      .sss-corp-search .sss-search-storage-categories-select{ color: {{widget.color_category_dropdown.value}}; }
      .sss-corp-search .sss-search-select:after{ border-top-color: {{widget.color_category_dropdown.value}}; }
    {% endif %}

    /* color_search_h2 customizations & alignment */
    .sss-corp-search .sss-search-criteria h2 {
      text-align: {{ widget.search_heading_align.value_or_default }};
      {% if widget.color_search_h2.value != blank %}
        color: {{widget.color_search_h2.value}};
      {% endif %}
    }

    {% if widget.color_h1_locations_quantity.value != blank %}
      /* color_h1_locations_quantity customizations */
      .sss-corp-search .sss-location-identifier,
      .sss-corp-search .location-single a .sss-location-identifier{ color: {{widget.color_h1_locations_quantity.value}}; }
    {% endif %}

    {% if widget.bg_category_badge.value != blank %}
      /* Category Badge BG customizations */
      .sss-corp-search .sss-cat,
      .sss-corp-search .map .view-loc.btn{ background-color: {{widget.bg_category_badge.value}}; }
    {% endif %}

    {% if widget.bg_category_badge_active.value != blank %}
      /* bg_category_badge_active customizations */
      .sss-corp-search .sss-cat a.active,
      .sss-corp-search .sss-locations-matrix.location-archive .sss-cat.searched-category{ background-color: {{widget.bg_category_badge_active.value}}; }
    {% endif %}

    {% if widget.color_category_badge.value != blank %}
      /* color_category_badge customizations */
      .sss-corp-search .sss-cat a,
      .sss-corp-search .map .view-loc.btn{ color: {{widget.color_category_badge.value}}; }
      .sss-corp-search .sss-cat a .cat-price:after{ border-top-color: {{widget.color_category_badge.value}}; }
    {% endif %}

    {% if widget.color_category_badge_active.value != blank %}
      /* color_category_badge_active customizations */
      .sss-corp-search .sss-cat a.active,
      .sss-corp-search .location-single .sss-cat.searched-category,
      .sss-corp-search .location-archive .sss-cat.searched-category a{ color: {{widget.color_category_badge_active.value}}; }
      .sss-corp-search .location-archive .sss-cat.searched-category .cat-price:after{ border-top-color: {{widget.color_category_badge_active.value}}; }
    {% endif %}

    {% if widget.color_popover_link.value != blank %}
      /* color_popover_link customizations */
      .popover-content a{ color:{{widget.color_popover_link.value}}; }
    {% endif %}

    {% if widget.bg_popover_hover.value_or_default != blank %}
      /* bg_popover_color customizations */
      .popover-content a:hover, .popover-content a.active{ background-color:{{widget.bg_popover_hover.value_or_default}}; }
    {% endif %}

    {% if widget.color_popover_hover.value != blank %}
      /* color_popover_hover customizations */
      .popover-content a:hover, .popover-content a.active{ color:{{widget.color_popover_hover.value}}; }
    {% endif %}

    {% if widget.color_location_matrix.value != blank %}
      /* color_location_matrix customizations */
      .sss-corp-search .sss-vcard,
      .sss-corp-search .unit-info{ color: {{widget.color_location_matrix.value}}; }
    {% endif %}

    {% if widget.bg_location_matrix.value != blank %}
      /* bg_location_matrix customizations */
      .sss-corp-search .sss-location{ background-color: {{widget.bg_location_matrix.value}}; }
    {% endif %}

    {% if widget.bg_unit_matrix.value != blank %}
      /* bg_unit_matrix customizations */
      .sss-corp-search .sss-unit-matrix{ background-color: {{widget.bg_unit_matrix.value}}; }
      .sss-corp-search .sss-cat a.active:after{ border-bottom-color: {{widget.bg_unit_matrix.value}}; }
    {% endif %}

    {% if widget.color_unit_matrix.value != blank %}
      /* color_unit_matrix customizations */
      .sss-corp-search .sss-unit-matrix,
      .sss-corp-search .sss-unit-matrix select,
      .sss-corp-search .sss-unit-matrix input,
      .sss-corp-search .unit-info{ color: {{widget.color_unit_matrix.value}}; }
    {% endif %}

    {% if widget.border_unit_matrix.value != blank %}
      /* border_unit_matrix customizations */
      .sss-corp-search .sss-unit-matrix,
      .sss-corp-search .sss-unit-matrix .unit-info{ border-color: {{widget.border_unit_matrix.value}}; }
      .sss-corp-search .sss-cat a.active:before{ border-bottom-color: {{widget.border_unit_matrix.value}}; }
    {% endif %}

    {% if widget.unit_border_bottom.value != blank %}
      /* unit_border_bottom customizations */
      .sss-corp-search .sss-unit-description{ border-top-color: {{widget.unit_border_bottom.value}}; }
    {% endif %}

    {% if widget.bg_amenity.value_or_default != blank  %}
      /* bg_amenity customizations */
      .sss-corp-search .sss-unit-amenities .icon-bg{ background-color: {{widget.bg_amenity.value_or_default}}; }
    {% endif %}

    {% if widget.color_special.value != blank %}
      /* color_special customizations */
      .sss-corp-search .sss-unit-special .unit-special-offer{ color: {{widget.color_special.value}}; }
      .sss-corp-search .sss-cat a .cat-special{ background-color: {{widget.color_special.value}}; }
      .sss-corp-search .sss-cat a .cat-special:after{ border-right-color: {{widget.color_special.value}}; opacity: .5; }
    {% endif %}

    {% if widget.color_special_badge.value != blank %}
      /* color_special_badge customizations */
      .sss-corp-search .sss-cat a .cat-special{ color: {{widget.color_special_badge.value}}; }
    {% endif %}

    {% if widget.bg_range_filled.value_or_default != blank %}
      /* bg_range_filled customizations */
      .sss-corp-search .noUi-connect{ background-color:{{widget.bg_range_filled.value_or_default}}; }
    {% endif %}

    {% if widget.bg_range_empty.value != blank %}
      /* bg_range_empty customizations */
      .sss-corp-search .noUi-background{ background-color: {{widget.bg_range_empty.value}}; }
    {% endif %}

    {% if widget.bg_pagination.value != blank %}
      /* bg_pagination customizations */
      .sss-corp-search .sss-pagination div span a{ background-color: {{widget.bg_pagination.value}}; }
    {% endif %}

    {% if widget.bg_pagination_inactive.value != blank %}
      /* bg_pagination_inactive customizations */
      .sss-corp-search .sss-pagination div span.disabled a{ background-color: {{widget.bg_pagination_inactive.value}}; }
    {% endif %}

    {% if widget.color_pagination.value != blank %}
      /* color_pagination customizations */
      .sss-corp-search .sss-pagination div span a{ color: {{widget.color_pagination.value}}; }
    {% endif %}

    {% if widget.color_pagination_active.value != blank %}
      /* color_pagination_active customizations NOTE - the below 'disabled' selector is mis-leading....this is correct */
      .sss-corp-search .sss-pagination div span.disabled a{ color: {{widget.color_pagination_active.value}}; }
    {% endif %}

    {% if widget.bg_disabled.value != blank %}
      /* bg_disabled customizations */
      .sss-corp-search .disabled,
      .sss-corp-search .disabled a,
      .sss-corp-search .disabled.sss-cat a,
      .sss-corp-search .sss-cat.searched-category .disabled,
      .sss-corp-search .location-archive .sss-cat.searched-category.disabled a,
      .popover-content .disabled, .popover-content .disabled a, .popover-content .disabled:hover{ background-color: {{widget.bg_disabled.value}}; }
    {% endif %}

    {% if widget.bg_disabled.value != blank %}
      /* bg_disabled customizations */
      .sss-corp-search .sss-unit-special.price-slash .unit-price{ color: {{widget.bg_disabled.value}}; }
    {% endif %}

    {% if widget.color_disabled.value != blank %}
      /* color_disabled customizations */
      .sss-corp-search .disabled,
      .sss-corp-search .disabled a,
      .sss-corp-search .sss-cat.disabled a,
      .sss-corp-search .sss-cat.searched-category .disabled,
      .sss-corp-search .location-archive .sss-cat.searched-category.disabled a,
      .popover-content .disabled, .popover-content .disabled a, .popover-content .disabled:hover{ color: {{widget.color_disabled.value}}; }
    {% endif %}

    {% if widget.bg_cta_elements.value != blank %}
      /*eLease Primary BG Color - eLease over-rides */
      .elease h1.header,
      .elease .circle,
      .elease .confirmation-container .confirmation-details #loading-table .header,
      .elease .confirmation-container .confirmation-details #table .header,
      .elease .confirmation-container .move-in-costs #loading-table .header,
      .elease .confirmation-container .move-in-costs #table .header,
      .elease .move-in-costs-container .confirmation-details #loading-table .header,
      .elease .move-in-costs-container .confirmation-details #table .header,
      .elease .move-in-costs-container .move-in-costs #loading-table .header,
      .elease .move-in-costs-container .move-in-costs #table .header,
      .ember-modal-dialog  #insurance-table .header,
      .ember-modal-dialog button{
        background-color: {{widget.bg_cta_elements.value}};
      }
      .elease .date-container .date-input .options-wrapper select,
      .elease .date-container .insurance-input .options-wrapper select,
      .elease .insurance-container .date-input .options-wrapper select,
      .elease .insurance-container .insurance-input .options-wrapper select,
      .elease .date-container .date-input input,
      .elease .date-container .insurance-input input,
      .elease .insurance-container .date-input input,
      .elease .insurance-container .insurance-input input,

      .elease .form input[type=color],
      .elease .form input[type=date],
      .elease .form input[type=datetime-local],
      .elease .form input[type=datetime],
      .elease .form input[type=email],
      .elease .form input[type=month],
      .elease .form input[type=number],
      .elease .form input[type=password],
      .elease .form input[type=search],
      .elease .form input[type=tel],
      .elease .form input[type=text],
      .elease .form input[type=time],
      .elease .form input[type=url],
      .elease .form input[type=week],
      .elease .form textarea,
      .elease .elease-form select,
      .elease select{
        border-bottom-color: {{widget.bg_cta_elements.value}};
      }

      .elease .date-container .date-input .options-wrapper:after,
      .elease .date-container .insurance-input .options-wrapper:after,
      .elease .insurance-container .date-input .options-wrapper:after,
      .elease .insurance-container .insurance-input .options-wrapper:after,
      .elease .elease-form .form-field.select:after{
        border-top-color: {{widget.bg_cta_elements.value}};
      }

      .elease .confirmation-container .confirmation-details #loading-table,
      .elease .confirmation-container .confirmation-details #table,
      .elease .confirmation-container .move-in-costs #loading-table,
      .elease .confirmation-container .move-in-costs #table,
      .elease .move-in-costs-container .confirmation-details #loading-table,
      .elease .move-in-costs-container .confirmation-details #table,
      .elease .move-in-costs-container .move-in-costs #loading-table,
      .elease .move-in-costs-container .move-in-costs #table,
      .ember-modal-dialog  #insurance-table{
        border-color: {{widget.bg_cta_elements.value}};
      }

      .elease #loading-table .loading-item,
      .elease .bar:after,
      .elease .bar:before{
        background-color: {{widget.bg_cta_elements.value}};
      }

      .elease .insurance-input select:valid,
      .elease .date-container .date-input input:read-only,
      .elease .elease-form .form-field input:focus,
      .elease .elease-form .form-field input:focus ~label,
      .elease .elease-form .form-field select:focus,
      .elease .elease-form .form-field select:focus ~label,
      .elease .elease-form .form-field input:valid,
      .elease .elease-form .form-field input:valid ~label,
      .elease .elease-form .form-field select:valid,
      .elease .elease-form .form-field select:valid ~label{
        color: {{widget.color_elease_valid.value}};
      }

      .elease .elease-form input[type=submit]{
        background-color: {{widget.bg_cta_elements.value}};
      }

      .elease .elease-form input[type=submit]:hover{
        background-color: {{ widget.bg_cta_elements.value_or_default_parsed | lighten: '15%'; }};
      }

      /* Calendar popup Date Colors */
      .is-today .pika-button{
         color: #999;
       }

      .is-today .pika-button:hover{
        color: #fff;
      }

      .pika-button:hover{
        background-color: {{ widget.bg_cta_elements.value_or_default_parsed | lighten: '10%'; }};
      }

      .is-selected .pika-button{
        color: #fff;
        background-color: {{widget.bg_cta_elements.value}};
        box-shadow: inset 0 1px 3px {{widget.bg_cta_elements.value}};
      }

      .pika-button:active{
        background: {{ widget.bg_cta_elements.value_or_default_parsed | lighten: '10%'; }};
      }
    {% endif %}
  </style>

  <div id="sss-container">
    <div id="app-loading" class="spinner">
      <div class="bounce1"></div>
      <div class="bounce2"></div>
      <div class="bounce3"></div>
    </div>
  </div>
</div>
